/**
 * @module @semaphore-protocol/utils
 * @version 4.0.0-beta.11
 * @file A library to provide utility functions to the other Semaphore packages.
 * @copyright Ethereum Foundation 2024
 * @license MIT
 * @see [Github]{@link https://github.com/semaphore-protocol/semaphore/tree/main/packages/utils}
*/
import { decodeBytes32String } from 'ethers/abi';
import { toBeHex } from 'ethers/utils';

/**
 * Typically used for decoding on-chain Semaphore messages.
 * When Semaphore messages are text they are converted to bigints before
 * the proof is generated (and eventually sent on-chain).
 * This function help devs converting bigint messages to text again.
 * If the original message was not text the output of this
 * function won't probably be human-readable text.
 * @param message The Semaphore message as a bigint.
 * @returns The Semaphore message as a text.
 */
function decodeMessage(message) {
    return decodeBytes32String(toBeHex(message, 32));
}

export { decodeMessage as default };
